{% extends "base.html" %}
{% block content %}
<h2>Rozliczenie czasu pracy</h2>
<form method="get" class="mb-4">
  <label>Data od: <input type="date" name="start_date" value="{{ start_date }}"></label>
  <label>Data do: <input type="date" name="end_date" value="{{ end_date }}"></label>
  <button type="submit" class="btn btn-primary">Pokaż</button>
</form>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Kod PR</th><th>Imię</th><th>Nazwisko</th><th>START</th><th>Przerwa</th><th>STOP</th>
      <th>Praca na akord</th><th>Praca na godziny</th><th>Suma czasu pracy</th>
      {% for field in fields %}<th>{{ field.name }}</th>{% endfor %}
      <th>Sztuki razem</th><th>Razem waga</th><th>Płaca za akord</th>
      <th>Płaca za godzinę</th><th>Wynagrodzenie brutto</th>
    </tr>
  </thead>
  <tbody>
    {% for row in data %}
    <tr>
      <td>{{ row.kod_pr }}</td>
      <td>{{ row.imie }}</td>
      <td>{{ row.nazwisko }}</td>
      <td>{{ row.start }}</td>
      <td>{{ row.przerwa }}</td>
      <td>{{ row.stop }}</td>
      <td>{{ row.praca_akord }}</td>
      <td>{{ row.praca_godziny }}</td>
      <td>{{ row.suma_czasu }}</td>
      {% for field in fields %}<td>{{ row.field_weights[field.name]|round(2) }}</td>{% endfor %}
      <td>{{ row.sztuki_razem }}</td>
      <td>{{ row.razem_waga }}</td>
      <td>{{ row.placa_akord }}</td>
      <td>{{ row.placa_godziny }}</td>
      <td>{{ row.wynagrodzenie_brutto }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}