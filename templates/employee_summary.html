<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Podsumowanie pracownika</title>
    <!-- Zakładam, że custom.css jest już dołączony globalnie w Twoim projekcie -->
</head>
<body>
<div class="report-main-container fade-in">
    <div class="employee-report-card">
        <div class="employee-report-title">Podsumowanie pracownika</div>
        <form method="get" action="{{ url_for('employee_summary') }}">
            <div class="mb-3 d-flex align-items-center flex-wrap gap-2" style="margin-bottom:1.1rem;">
                <label class="employee-summary-label" for="employee_id" style="margin-right:0.7em;">Wybierz pracownika:</label>
                <select class="form-select" name="employee_id" id="employee_id" onchange="this.form.submit()" style="min-width:190px;">
                    <option value="">-- wybierz --</option>
                    {% for emp in employees %}
                        <option value="{{ emp.id }}" {% if emp.id == selected_id %}selected{% endif %}>
                            {% if emp.external_id %}
                                {{ emp.external_id }} -
                            {% else %}
                                {{ emp.id }} -
                            {% endif %}
                            {{ emp.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </form>

        {% if selected_employee %}
            <div class="employee-summary-info mb-3" style="margin-bottom:1.5em;">
                <b>Pracownik:</b>
                {% if selected_employee.external_id %}
                    {{ selected_employee.external_id }} -
                {% else %}
                    {{ selected_employee.id }} -
                {% endif %}
                {{ selected_employee.name }}
            </div>
            <table class="employee-report-table table table-bordered table-hover table-striped">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Odmiana</th>
                        <th>Pole</th>
                        <th>Suma kg (akord)</th>
                        <th>Wynagrodzenie akordowe</th>
                        <th>Godzin pracy</th>
                        <th>Wynagrodzenie godzinowe</th>
                        <th>Wynagrodzenie za dzień</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in summary %}
                    <tr>
                        <td>{{ row.date }}</td>
                        <td>{{ row.odmiany }}</td>
                        <td>{{ row.pola }}</td>
                        <td>{{ row.total_kg }}</td>
                        <td>{{ row.total_piece_pay }} zł</td>
                        <td>{{ row.total_hours }}</td>
                        <td>{{ row.hourly_pay }} zł</td>
                        <td>{{ row.day_sum }} zł</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr class="sum-row">
                        <td colspan="3" style="text-align: right; font-weight:700;">SUMA:</td>
                        <td>{{ total_kg_sum }}</td>
                        <td>{{ total_piece_sum }} zł</td>
                        <td>{{ total_hours_sum }}</td>
                        <td>{{ total_hourly_sum }} zł</td>
                        <td>{{ total_all_sum }} zł</td>
                    </tr>
                </tfoot>
            </table>
        {% else %}
            <p class="mt-3">Wybierz pracownika z listy powyżej.</p>
        {% endif %}
    </div>
</div>
</body>
</html>